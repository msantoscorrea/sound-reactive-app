{"version":3,"sources":["src/index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["require","el","document","querySelector","sourceStr","strArray","split","bins","initElements","stringArray","i","length","letter","phraseAtom","createElement","innerText","appendChild","init","initVisualizer","window","addEventListener","form","getElementById","submit","event","preventDefault","elem","querySelectorAll","forEach","item","remove","target","value","args","navigator","mediaDevices","undefined","getUserMedia","constraints","webkitGetUserMedia","mozGetUserMedia","Promise","reject","Error","resolve","call","audio","then","stream","audioCtx","AudioContext","webkitAudioContext","analyser","createAnalyser","minDecibels","maxDecibels","smoothingTimeConstant","source","createMediaStreamSource","connect","fftSize","dataArray","Uint8Array","avgHistory","setFontFeatures","avg","els","childNodes","push","shift","style","fontVariationSettings","concat","map","draw","now","getByteFrequencyData","requestAnimationFrame","catch","err","console","log","min1","max1","min2","max2","returnvalue","bundleURL","getBundleURLCached","getBundleURL","matches","stack","match","getBaseURL","url","replace","exports","bundle","updateLink","link","newLink","cloneNode","onload","href","Date","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","module"],"mappings":"ACAA,ACAA,IDAIuF,ACAAU,MAAM,GDAG,ACAAjG,GDAG,IAAI,ACAA,CAAC,cAAc,CAAC;ADCpC,ACCA,SDDSwF,ACCAU,UAAUA,CAACC,IAAI,EAAE,CDDCX,CAAA,EAAG;ADD9BxF,ECEE,ACCA,IDDI,ACCAoG,CDDCb,ADFP,MEGa,GDDG,ACCAY,EDDE,ECCE,CAACE,SAAS,CAAC,CAAC;AFDhC,EEEED,EDDEb,ADDEtF,EAAE,GEEC,AFFEC,CEEDoG,GDDG,GAAGb,ACCA,CFFG,CAACtF,CEED,SDDS,CAAC,CAAC,CCCC,AFFE,CAAC,SAAS,CAAC;AAC5C,ECCE,ECCEgG,AFFA/F,IEEI,CAAC0B,IFFI,EEEE,CAAC,AFFA,CEEC,WFFW;AAC5B,ECEE,ACAA,CAAC,CFFCzB,KCEKkF,GDFG,GAAGnF,GCEG,MDFM,CAACE,KAAK,CAAC,EAAE,CAAC;ACGlC,ADDA,EECE8F,EFDE7F,IAAI,CECC,CAACgG,CFDC,EAAE,CECC,GAAGJ,IAAI,CAACI,IAAI,CAACjG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,GAAGkG,IAAI,CAAC7B,GAAG,CAAC,CAAC;ADE3D,ADDA,EEAEwB,IAAI,CAACM,EDCEhB,ADDAjF,QEAQ,CAACkG,GDCGjB,ADDAjF,CCCA,ADDCC,ECCE,MCDM,CAAC2F,EFAE,EAAE,GEAG,EAAED,IAAI,CAACQ,WAAW,CAAC;AACzD,EDCE,ADDA,KAAK,IAAIjG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,WAAW,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;AEE/C,EDAE,ECAEkG,AFDA,ECCE,EDDIhG,MECI,AFDE,GECC,AFDEH,IECE,OFDS,CAACC,CAAC,CAAC;AEEjC,IDAI,ADDA,IAAMG,CECDgG,CDAC,IAAIlE,ICAIkE,AFDE,CCCD,ACAD,CDAA,CAAC,ACAE,AFDE3G,QAAQ,CAACY,aAAa,CAAC,MAAM,CAAC;ECEnD,ACAA,CDAC,CAAC,ADDAD,EECE+F,KDAK7B,GAAG,ADDA,CAAChE,CCCC,ACAA,EAAE,MFDM,GAAGH,MAAM;ICE7B,ACAA,AFDAX,EAAE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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["import \"./styles.css\";\n\nconst el = document.querySelector(\"#app h1\");\nvar sourceStr = \"amplificar\";\nvar strArray = sourceStr.split(\"\");\n\nvar bins = 16;\n\nfunction initElements(stringArray) {\n  for (let i = 0; i < stringArray.length; i++) {\n    const letter = stringArray[i];\n    const phraseAtom = document.createElement(\"SPAN\");\n    phraseAtom.innerText = letter;\n    el.appendChild(phraseAtom);\n  }\n}\n\nfunction init() {\n  initVisualizer();\n  initElements(\"amplificar\");\n}\n\nwindow.addEventListener(\"load\", init(), false);\n\nconst form = document.getElementById(\"form\");\nform.addEventListener(\"submit\", function submit(event) {\n  event.preventDefault();\n\n  const elem = document.querySelectorAll('#app h1 span');\n  elem.forEach(item => item.remove());\n\n  sourceStr = event.target[0].value;\n  strArray = sourceStr.split(\"\");\n  initElements(strArray);\n});\n\nfunction initVisualizer(args) {\n  // Older browsers might not implement mediaDevices at all, so we set an empty object first\n  if (navigator.mediaDevices === undefined) {\n    navigator.mediaDevices = {};\n  }\n\n  // Some browsers partially implement mediaDevices. We can't just assign an object\n  // with getUserMedia as it would overwrite existing properties.\n  // Here, we will just add the getUserMedia property if it's missing.\n  if (navigator.mediaDevices.getUserMedia === undefined) {\n    navigator.mediaDevices.getUserMedia = function (constraints) {\n      // First get ahold of the legacy getUserMedia, if present\n      var getUserMedia =\n        navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\n      // Some browsers just don't implement it - return a rejected promise with an error\n      // to keep a consistent interface\n      if (!getUserMedia) {\n        return Promise.reject(\n          new Error(\"getUserMedia is not implemented in this browser\")\n        );\n      }\n\n      // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n      return new Promise(function (resolve, reject) {\n        getUserMedia.call(navigator, constraints, resolve, reject);\n      });\n    };\n  }\n\n  navigator.mediaDevices\n    .getUserMedia({ audio: true })\n    .then(function (stream) {\n      // Set up a Web Audio AudioContext and AnalyzerNode, configured to return the\n      // same number of bins of audio frequency data.\n      var audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n\n      var analyser = audioCtx.createAnalyser();\n      analyser.minDecibels = args;\n      analyser.maxDecibels = -10;\n      analyser.smoothingTimeConstant = 0.5;\n\n      var source = audioCtx.createMediaStreamSource(stream);\n      source.connect(analyser);\n\n      analyser.fftSize = bins * 2;\n\n      var dataArray = new Uint8Array(bins);\n\n      const avgHistory = [];\n\n      function setFontFeatures(avg) {\n        const els = el.childNodes;\n\n        avgHistory.push(avg);\n        if (avgHistory.length > els.length) {\n          avgHistory.shift();\n        }\n\n        for (let i = els.length - 1; i >= 0; i--) {\n          const el = els[i];\n          el.style.fontVariationSettings = `\"wght\" ${map(\n            avgHistory[i],\n            0,\n            64,\n            10,\n            100\n          )}`;\n        }\n      }\n\n      function draw(now) {\n        analyser.getByteFrequencyData(dataArray);\n\n        // Use that data to drive updates to the fill-extrusion-height property.\n        let avg = 0;\n        for (var i = 0; i < bins; i++) {\n          avg += dataArray[i];\n        }\n        avg /= bins;\n\n        setFontFeatures(avg);\n\n        requestAnimationFrame(draw);\n      }\n\n      requestAnimationFrame(draw);\n    })\n    .catch(function (err) {\n      console.log(\"The following error occured: \" + err);\n    });\n}\n\nfunction map(value, min1, max1, min2, max2) {\n  var returnvalue = ((value - min1) / (max1 - min1)) * (max2 - min2) + min2;\n  return returnvalue;\n}\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}